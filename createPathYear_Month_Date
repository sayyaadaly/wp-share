<?xml version="1.0" encoding="UTF-8"?>
<config xmlns="http://web-harvest.sourceforge.net/schema/1.0/config" scriptlang="groovy">


<!--Access datastore -->
	<var-def name="links">
		<datastore name="Manuel_Teller_Config">
			SELECT * FROM @this
		</datastore>
	</var-def> 
	<!--Access datastore -->

<var-def name="bot_task_properties">
	<datastore name="Manuel_Teller_Config">
		<template>select * from @this</template>
	</datastore>
</var-def>

<script><![CDATA[
	def BOT_CONFIG = [:]
	bot_task_properties.getWrappedObject().toList().each { property ->
		BOT_CONFIG.put(property.get("names").toString(), property.get("informations").toString())
	}
	sys.defineVariable("BOT_CONFIG", BOT_CONFIG)
]]></script>	


<script><![CDATA[ 

   		import java.util.Calendar;
		import java.util.Formatter;
		import java.text.SimpleDateFormat;
		
		
		import java.nio.file.Files;
		import java.nio.file.Path;
		import java.nio.file.Paths;
		
		import java.time.Year;
		
		Calendar cal = Calendar.getInstance();

		Formatter fmt4 = new Formatter();
		fmt4 = new Formatter();
		
      	def date = new Date()
		def sdf = new SimpleDateFormat("dd.MM.yyyy")
		
		Year y = Year.now();  
		
		String Chrome_Download_path = (BOT_CONFIG.getWrappedObject().get("Custom_Chrome_Download_Path").toString());

		Chrome_Download_path = Chrome_Download_path + "%s\\%s\\%s\\"
		 
		String fs;
		fs = String.format(Chrome_Download_path,y,fmt4, sdf.format(date));
		
		try{
			Files.createDirectories(Paths.get(fs));
		}catch(Exception e){
			log.info("Error " + e)	
		}
		
	
		
		
]]></script>
	
	
    <export include-original-data="true"></export>

</config>
